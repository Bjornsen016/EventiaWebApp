@page
@using Utils
@model MyEventsModel
@{
    var events = Model.Events;
    var attendee = Model.CurrentUser;
    ViewData["Title"] = attendee.Name + "'s Events";
}

<div class="container d-flex justify-content-center flex-column w-75">
    <h1 class="text-center">Hello @attendee.Name</h1>
    <table class="table table-bordered table-hover">
        <thead>
        <tr>
            <th scope="col">@Html.DisplayNameFor(model => events[0].Title)</th>
            <th scope="col">@Html.DisplayNameFor(model => events[0].Date)</th>
            <th scope="col">@Html.DisplayNameFor(model => events[0].Place)</th>
            <th scope="col">@Html.DisplayNameFor(model => events[0].Organizer.Name)</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var evt in events)
        {
            PrintTableRow(evt);
        }
        </tbody>
    </table>
</div>

@functions
{
    void PrintTableRow(Event evt)
    {
        <tr>
            <th scope="row">@evt.Title</th>
            <td>@TimeUtils.ConvertUtcToSpecificTimeZone(evt.Date, evt.UtcTimeOffset)</td>
            <td>@evt.Place</td>
            <td>@evt.Organizer.Name</td>
        </tr>
    }
}
